!function(a,b){if("function"==typeof define&&define.amd)define(["backbone","lodash","chaplin"],b);else if("object"==typeof module&&module&&module.exports)module.exports=b(require("backbone"),require("lodash"),require("chaplin"));else{if("function"!=typeof require)throw new Error("Chaplin requires Common.js or AMD modules");b(window.Backbone,window._||window.Backbone.utils,window.Chaplin)}}(this,function(a,b,c){function d(d){return{backbone:a,lodash:b,chaplin:c}[d]}return(d=function e(a,b,c){function f(h,i){if(!b[h]){if(!a[h]){var j="function"==typeof d&&d;if(!i&&j)return j(h,!0);if(g)return g(h,!0);var k=new Error("Cannot find module '"+h+"'");throw k.code="MODULE_NOT_FOUND",k}var l=b[h]={exports:{}};a[h][0].call(l.exports,function(b){var c=a[h][1][b];return f(c?c:b)},l,l.exports,e,a,b,c)}return b[h].exports}for(var g="function"==typeof d&&d,h=0;h<c.length;h++)f(c[h]);return f}({1:[function(a,b,c){var d;d=window.Chapeau={Application:a("./chapeau/application"),mediator:a("./chapeau/mediator"),Controller:a("./chapeau/controllers/controller"),Collection:a("./chapeau/models/collection"),Model:a("./chapeau/models/model"),Layout:a("./chapeau/views/layout"),View:a("./chapeau/views/view"),CollectionView:a("./chapeau/views/collection_view"),utils:a("./chapeau/lib/utils")},b.exports=d},{"./chapeau/application":2,"./chapeau/controllers/controller":3,"./chapeau/lib/utils":4,"./chapeau/mediator":5,"./chapeau/models/collection":6,"./chapeau/models/model":7,"./chapeau/views/collection_view":8,"./chapeau/views/layout":9,"./chapeau/views/view":10}],2:[function(a,b,c){"use strict";var d,e,f,g,h,i,j,k=function(a,b){function c(){this.constructor=a}for(var d in b)l.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},l={}.hasOwnProperty;"undefined"!=typeof window&&null!==window?window.global=h=window:null==h&&(h={}),g=a("lodash"),e=a("chaplin"),j=a("./lib/utils"),f=a("./models/collection"),h.mediator=i=a("./mediator"),b.exports=d=function(b){function c(a){g.extend(this.settings,this.options,a),h.dummyCollection=new f,this.settings.globalAutoload&&this.autoload(),c.__super__.constructor.call(this,this.settings)}return k(c,b),c.prototype.settings={controllerSuffix:"-controller",collectionsAutoSingleton:!0,globalAutoload:!0},c.prototype.classList={views:{},collections:{},models:{},helpers:{},templates:{},controllers:{},misc:{},bases:{}},c.prototype.orderedRequireList={views:[],collections:[],models:[],helpers:[],templates:[],controllers:[],misc:[],bases:[]},c.prototype.initMediator=function(){var a,b,d,e;if(this.settings.collectionsAutoSingleton){e=this.classList.collections;for(b in e)a=e[b],d=j.pluralize(b.replace(/-collection$/,"")),i[d]=new a}return i.canUseLocalStorage=this._checkLocalStorage(),c.__super__.initMediator.apply(this,arguments)},c.prototype._checkLocalStorage=function(){var a,b,c;c="test";try{return localStorage.setItem(c,c),localStorage.removeItem(c),!0}catch(b){return a=b,!1}},c.prototype.autoload=function(){var b,c,d,e,f,i,j,k;for(h.application=this,i=(h.require||a).list(),d=0,e=i.length;d<e;d++)f=i[d],k=f.split("/")[0],this.orderedRequireList[k]?"views"!==k||g.endsWith(f,"-view")?g.startsWith(f,"helpers/base")?this.orderedRequireList.bases.push(f):this.orderedRequireList[k].push(f):this.orderedRequireList.templates.push(f):this.orderedRequireList.misc.push(f);return j=function(a,b){var c;return-1!==(c=b.indexOf("abstract"))||-1!==a.indexOf("abstract")?c:b.split("/").length-a.split("/").length},b=["view","layout","controller","model","collection","collection_view"],c=function(a,c){return-1===(a=b.indexOf(a.split("/").pop()))?1:-1===(c=b.indexOf(c.split("/").pop()))?-1:a-c},this.orderedRequireList.views.sort(j),this.orderedRequireList.controllers.sort(j),this.orderedRequireList.models.sort(j),this.orderedRequireList.collections.sort(j),this.orderedRequireList.bases.sort(c),this.preload("bases"),this.preload("helpers"),this.preload("models"),this.preload("collections"),this.preload("templates"),this.preload("views"),this.preload("controllers")},c.prototype.preload=function(b){var c,d,e,f,i,j,k;for(k=this.orderedRequireList[b],e=0,f=k.length;e<f;e++){switch(j=k[e],d=j.split("/"),d.shift(),"views"!==b&&"templates"!==b&&"controllers"!==b||d[d.length-2]!==d[d.length-1].replace("-view","")||(d[d.length-2]=""),c=d.join("-"),b){case"views":case"collections":case"controllers":i=g.classify(c);break;case"bases":i=g.classify(c.replace("base-",""));break;default:i=g.classify(c+"-"+b.slice(0,-1))}h[i]=this.classList[b][c]=(h.require||a)(j)}},c.prototype.start=function(){return"function"==typeof this.beforeStart?this.beforeStart(function(a){return function(){return c.__super__.start.apply(a,arguments)}}(this)):c.__super__.start.apply(this,arguments)},c}(e.Application)},{"./lib/utils":4,"./mediator":5,"./models/collection":6,chaplin:"chaplin",lodash:"lodash"}],3:[function(a,b,c){"use strict";var d,e,f,g,h=function(a,b){function c(){this.constructor=a}for(var d in b)i.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},i={}.hasOwnProperty;"undefined"!=typeof window&&null!==window?window.global=g=window:null==g&&(g={}),f=a("lodash"),d=a("chaplin"),b.exports=e=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return h(b,a),b.prototype.beforeAction=function(a,c){return"production"!==g.ENV&&log("[c='font-size: 1.2em;color:#d33682;font-weight:bold']▚ "+c.name+"[c]\t\t",c),b.__super__.beforeAction.apply(this,arguments)},b}(d.Controller)},{chaplin:"chaplin",lodash:"lodash"}],4:[function(a,b,c){"use strict";var d,e;d=a("lodash"),e={functionName:function(a){var b;return b=a.toString().substr(9),b.substr(0,b.indexOf("("))},className:function(a){var b;return b=a.constructor.toString().substr(9),b.substr(0,b.indexOf("("))},_pluralRules:[["m[ae]n$","men"],["(eau)x?$","$1x"],["(child)(?:ren)?$","$1ren"],["(pe)(?:rson|ople)$","$1ople"],["^(m|l)(?:ice|ouse)$","$1ice"],["(matr|cod|mur|sil|vert|ind)(?:ix|ex)$","$1ices"],["(x|ch|ss|sh|zz)$","$1es"],["([^ch][ieo][ln])ey$","$1ies"],["([^aeiouy]|qu)y$","$1ies"],["(?:([^f])fe|(ar|l|[eo][ao])f)$","$1$2ves"],["sis$","ses"],["^(apheli|hyperbat|periheli|asyndet|noumen)(?:a|on)$","$1a"],["^(phenomen|criteri|organ|prolegomen|w+hedr)(?:a|on)$","$1a"],["^(agend|addend|millenni|ov|dat|extrem|bacteri|desiderat)(?:a|um)$","$1a"],["^(strat|candelabr|errat|symposi|curricul|automat|quor)(?:a|um)$","$1a"],["(her|at|gr)o$","$1oes"],["^(alumn|alg|vertebr)(?:a|ae)$","$1ae"],["(alumn|syllab|octop|vir|radi|nucle|fung|cact)(?:us|i)$","$1i"],["(stimul|termin|bacill|foc|uter|loc)(?:us|i)$","$1i"],["([^l]ias|[aeiou]las|[emjzr]as|[iu]am)$","$1"],["([^l]ias|[aeiou]las|[emjzr]as|[iu]am)$","$1"],["(e[mn]u)s?$","$1s"],["(alias|[^aou]us|tlas|gas|ris)$","$1es"],["^(ax|test)is$","$1es"],["([^aeiou]ese)$","$1"],["s?$","s"]],pluralize:function(a){var b,c,d,e,f;for(e=this._pluralRules,b=0,c=e.length;b<c;b++)if(f=e[b],(d=new RegExp(f[0])).test(a))return a.replace(d,f[1]);return a}},"function"==typeof Object.seal&&Object.seal(e),b.exports=e},{lodash:"lodash"}],5:[function(a,b,c){"use strict";var d,e;d=a("chaplin"),e=d.mediator,e.onLy=function(a){return this.offLy(a),this.on.apply(this,arguments)},e.offLy=function(a){return delete e._events[a]},b.exports=e},{chaplin:"chaplin"}],6:[function(a,b,c){"use strict";var d,e,f,g,h,i,j=function(a,b){function c(){this.constructor=a}for(var d in b)k.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},k={}.hasOwnProperty;"undefined"!=typeof window&&null!==window?window.global=h=window:null==h&&(h={}),g=a("lodash"),d=a("chaplin"),f=a("./model"),i=a("../lib/utils"),b.exports=e=function(a){function b(){this._className=i.className(this).replace("Collection",""),this.model||(this.model=h[this._className+"Model"]||f),this.subset={},this.storeName="App::"+this._className,b.__super__.constructor.apply(this,arguments)}return j(b,a),g(b.prototype).extend(d.SyncMachine),b.prototype.model=null,b.prototype.subset={},b.prototype.meta=null,b.prototype.subfilter=function(a){return this.subcollection({filter:a})},b.prototype.first=function(a){var c;return c=b.__super__.first.apply(this,arguments),a?this.subfilter(function(a){return-1!==c.indexOf(a)}):c},b.prototype.last=function(a){var c;return c=b.__super__.last.apply(this,arguments),a?this.subfilter(function(a){return-1!==c.indexOf(a)}):c},b.prototype.where=function(a,b){var c,d;return c="where:"+JSON.stringify(a),g.isEmpty(a)?b?void 0:[]:(d=function(b){var c;for(c in a)if(a[c]!==b.get(c))return!1;return!0},b?this.find(d):this.subset[c]||(this.subset[c]=this.subfilter(d)))},b}(d.Collection)},{"../lib/utils":4,"./model":7,chaplin:"chaplin",lodash:"lodash"}],7:[function(a,b,c){"use strict";var d,e,f,g=function(a,b){function c(){this.constructor=a}for(var d in b)h.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},h={}.hasOwnProperty;f=a("lodash"),d=a("chaplin"),b.exports=e=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return g(b,a),f(b.prototype).extend(d.SyncMachine),b.prototype.get=function(a){var c;return this[c="get"+a.charAt(0).toUpperCase()+a.slice(1)]?this[c]():b.__super__.get.apply(this,arguments)},b.prototype.set=function(a,c){var d;return"string"==typeof a&&this[d="set"+a.charAt(0).toUpperCase()+a.slice(1)]?this[d](c):b.__super__.set.apply(this,arguments)},b}(d.Model)},{chaplin:"chaplin",lodash:"lodash"}],8:[function(a,b,c){"use strict";var d,e,f,g,h,i,j=function(a,b){function c(){this.constructor=a}for(var d in b)k.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},k={}.hasOwnProperty;"undefined"!=typeof window&&null!==window?window.global=h=window:null==h&&(h={}),g=a("lodash"),d=a("chaplin"),f=a("./view"),i=a("../lib/utils"),b.exports=e=function(a){function b(a){this._className=i.className(this),this.itemView||(this.itemView=h[this._className.replace("View","ItemView")]),!this.listSelector&&h[this._className.replace(/View$/,"Template")]&&(this.listSelector=".list"),this.initAttributes(),this.model||(this.model=new Model),b.__super__.constructor.apply(this,arguments)}return j(b,a),b.prototype.getTemplateFunction=f.prototype.getTemplateFunction,b.prototype.initAttributes=f.prototype.initAttributes,b.prototype.useCssAnimation=!0,b.prototype.enhance=f.prototype.enhance,b.prototype.dispose=f.prototype.dispose,b.prototype.render=f.prototype.render,b.prototype.getTemplateData=function(){var a;return a=b.__super__.getTemplateData.apply(this,arguments),this.model&&(a=g.extend(d.utils.serialize(this.model,a)),"function"!=typeof this.model.isSynced||this.model.isSynced()||(a.synced=!1)),a},b.prototype.doRender=function(){var a,b,c;return c=this.getTemplateFunction(),"function"!=typeof c?this:(a=c(this.getTemplateData()),null!=h.toStaticHTML&&(a=toStaticHTML(a)),this.$el.html(a),b=g.result(this,"listSelector"),this.$list=b?this.$(b):this.$el,this.initFallback(),this.initLoadingIndicator(),this.renderItems&&this.renderAllItems(),this.enhance(),"function"==typeof this.afterRender?this.afterRender():void 0)},b.prototype.resetCollection=function(a){return this.stopListening(this.collection),this.collection=a,this.listenTo(this.collection,"add",this.itemAdded),this.listenTo(this.collection,"remove",this.itemRemoved),this.listenTo(this.collection,"reset sort",this.itemsReset),this.itemsReset()},b}(d.CollectionView)},{"../lib/utils":4,"./view":10,chaplin:"chaplin",lodash:"lodash"}],9:[function(a,b,c){"use strict";var d,e,f,g,h,i,j=function(a,b){function c(){this.constructor=a}for(var d in b)k.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},k={}.hasOwnProperty;"undefined"!=typeof window&&null!==window?window.global=h=window:null==h&&(h={}),g=a("lodash"),d=a("chaplin"),f=a("./view"),i=a("../lib/utils"),b.exports=e=function(a){function b(a){this._className=i.className(this),b.__super__.constructor.apply(this,arguments)}return j(b,a),b.prototype.isExternalLink=function(a){var b,c,d;return d="_blank"===a.target||"external"===a.rel||"https:"!==(b=a.protocol)&&"http:"!==b&&":"!==b&&"file:"!==b&&b!==location.protocol||(c=a.hostname)!==location.hostname&&""!==c},b}(d.Layout)},{"../lib/utils":4,"./view":10,chaplin:"chaplin",lodash:"lodash"}],10:[function(a,b,c){"use strict";var d,e,f,g,h,i,j=function(a,b){function c(){this.constructor=a}for(var d in b)k.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},k={}.hasOwnProperty;"undefined"!=typeof window&&null!==window?window.global=h=window:null==h&&(h={}),g=a("lodash"),d=a("chaplin"),e=a("../models/model"),i=a("../lib/utils"),b.exports=f=function(a){function b(a){this.initAttributes(),this.model||(this.model=new e),b.__super__.constructor.apply(this,arguments)}return j(b,a),b.prototype.autoRender=!0,b.prototype.getTemplateFunction=function(){return this.template?this.template:(this._className=this._className||i.className(this),h[this._className.replace(/View$/,"Template")])},b.prototype.initAttributes=function(){var a;return this._className=this._className||i.className(this),a=g.dasherize(this._className.charAt(0).toLowerCase()+this._className.slice(1)),this.className=this.className?this.className+" "+a:a},b.prototype.dispose=function(){return"production"===h.ENV||this.noDebug||log("[c='font-weight:bold;margin-left:20px;color:#268bd2;']❖ "+this._className+"::[c][c='font-weight:bold;color:#b58900']dispose[c]\t\t",this),("function"==typeof this.beforeDispose?this.beforeDispose(function(a){return function(c){if(c!==!1)return b.__super__.dispose.apply(a,arguments)}}(this)):void 0)||b.__super__.dispose.apply(this,arguments)},b.prototype.delegateEvents=function(a,c){return b.__super__.delegateEvents.apply(this,arguments),this.delegateHammerEvents()},b.prototype.doRender=function(){var a,b;return b=this.getTemplateFunction(),"function"!=typeof b?this:(a=b(this.getTemplateData()),null!=h.toStaticHTML&&(a=toStaticHTML(a)),this.$el.html(a),this.enhance(),"function"==typeof this.afterRender?this.afterRender():void 0)},b.prototype.render=function(){return!this.disposed&&("production"!==h.ENV&&(this.noDebug||log("[c='font-weight:bold;margin-left:20px;color:#268bd2;']❖ "+this._className+"::[c][c='font-weight:bold;color:#b58900']render[c]\t\t",this)),("function"==typeof this.beforeRender?this.beforeRender(function(a){return function(b){if(b!==!1)return a.doRender()}}(this)):void 0)||this.doRender())},b.prototype.enhance=function(){return this.$("a[data-route]").each(function(){var a,b,c,e,f,h;this.$=$(this),e=this.$.is("[data-route-reset]")?{}:g.extend({},mediator.lastRouteParams),c=null,b=this.$.data();for(a in b)h=b[a],"route"===a?c=h:"routeReset"!==a&&0===a.indexOf("route")&&(e[(a=a.substr(5)).charAt(0).toLowerCase()+a.slice(1)]=h);f="#";try{f=d.utils.reverse(c,e)}catch(i){}return this.$.attr("href",f),this.$.off("click"),this.$.on("click",function(a){var b,c,e;if(!d.utils.modifierKeyPressed(event))return b=event.currentTarget,e="A"===b.nodeName,c=b.getAttribute("href")||b.getAttribute("data-href")||null,d.utils.redirectTo({url:c}),event.preventDefault(),!1})})},b}(d.View)},{"../lib/utils":4,"../models/model":7,chaplin:"chaplin",lodash:"lodash"}]},{},[1]))(1)});